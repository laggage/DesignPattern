## 工厂方法模式(Factory Method pattern)

工厂方法模式是简单工厂方法的延申, 它继承了简单工厂模式的有点, 同时弥补了简单工厂模式的缺陷, 更好的符合开闭原则, 再增加新的具体产品对象时, 不需要对已有的系统做任何修改.

### 定义
定义一个用于创建对象的接口, 但是让子类决定将哪一个类实例化. 工厂方法模式让一个类的实例化延迟到其子类.

工厂方法模式简称**工厂模式**, 又称**细腻构造器模式(Virtual Constructor Pattern)**, **多态工厂模式(Polymorphic Factory Pattern)**.
在工厂方法模式中, 工厂父类负责定义创建产品对象的公共接口, 而工厂子类负责生产具体的产品对象.

工厂方法模式包含四个角色
1. 抽象产品(Product)
2. 具体产品(ConcreteProduct)
3. 抽象工厂(Factory)
4. 具体工厂(ConcreteFactory)

## 一般结构
![](https://img2018.cnblogs.com/blog/1596066/201908/1596066-20190821144842156-1944454496.png)


## 优点
工厂方法模式中, 工厂方法用来创建客户所需要的产品, 同时向客户隐藏了哪种具体产品类将被实例化这一细节, 用户只需要关心所需产品对应的工厂即可, 无需关心创建细节, 设甚至无需知道具体产品的类名;
工厂自主确定创建何种产品对象, 而如何创建这个对象的细节完成封装在具体工厂的内部;
在系统中加入新产品时, 无需修改原有代码, 只需新建具体产品和工厂类即可, 完全符合开闭原则.

## 缺点
系统中类的个数成对增加, 一定程度上增加了系统的复杂度, 带来额外的开销;
增加了系统的抽象性和理解难度.

## 适用环境
客户端不知道它所需要的对象的类;
抽象工厂通过其子类来指定创建哪个对象;

## 实例

### 日志记录器
![](https://img2018.cnblogs.com/blog/1596066/201908/1596066-20190821143826513-2142430125.png)

### 不同格式的图片读取器
![](https://img2018.cnblogs.com/blog/1596066/201908/1596066-20190821143902942-936590540.png)


